<!-- This is the chat.html file you provided, with IDs added for JS hooks -->
<!DOCTYPE html>
<html class="dark" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Project Phoenix Chat</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#1173d4",
              "background-light": "#f6f7f8",
              "background-dark": "#101922",
              "matrix-green": {
                DEFAULT: "#10B981",
                light: "#34D399",
                dark: "#059669",
                faint: "rgba(16, 185, 129, 0.1)",
              },
              "matrix-bg": "#0D1117",
              "matrix-border": "rgba(45, 212, 191, 0.1)",
              "matrix-grid": "rgba(45, 212, 191, 0.07)",
              "matrix-panel": "#161B22",
              "matrix-text-primary": "#E6EDF3",
              "matrix-text-secondary": "#7D8590",
            },
            fontFamily: { display: ["Inter", "sans-serif"] },
          },
        },
      };
    </script>
    <style>
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .math-grid {
        background-color: #0d1117;
        background-image: linear-gradient(
            rgba(45, 212, 191, 0.07) 1px,
            transparent 1px
          ),
          linear-gradient(
            to right,
            rgba(45, 212, 191, 0.07) 1px,
            transparent 1px
          );
        background-size: 2rem 2rem;
      }
      /* Custom scrollbar for chat */
      #message-container::-webkit-scrollbar {
        width: 6px;
      }
      #message-container::-webkit-scrollbar-track {
        background: transparent;
      }
      #message-container::-webkit-scrollbar-thumb {
        background: #2d3748;
        border-radius: 3px;
      }
      #message-container::-webkit-scrollbar-thumb:hover {
        background: #4a5568;
      }
    </style>
  </head>
  <body class="bg-matrix-bg font-display text-matrix-text-primary">
    <div class="flex h-screen w-full">
      <main class="flex-1 flex flex-col math-grid">
        <header
          class="p-4 border-b border-matrix-border flex-shrink-0 bg-matrix-bg/80 backdrop-blur-sm"
        >
          <p
            class="text-matrix-text-primary tracking-light text-xl font-bold leading-tight"
          >
            Readers-Writers Chat Room
          </p>
        </header>

        <!-- Message Container -->
        <div
          id="message-container"
          class="flex-1 flex flex-col overflow-y-auto p-4 space-y-4"
        >
          <!-- Messages will be dynamically inserted here by chat.js -->
          <div class="py-2">
            <div class="w-full border-t border-matrix-border"></div>
            <p
              class="text-matrix-text-secondary text-sm font-normal leading-normal py-3 text-center"
            >
              Connecting to server...
            </p>
            <div class="w-full border-t border-matrix-border"></div>
          </div>
        </div>

        <!-- Message Input Form -->
        <form
          id="chat-form"
          class="p-4 border-t border-matrix-border flex-shrink-0 bg-matrix-bg/80 backdrop-blur-sm"
        >
          <div
            id="input-container"
            class="bg-matrix-panel rounded-lg p-2 border border-matrix-border focus-within:ring-2 focus-within:ring-matrix-green"
          >
            <p
              id="role-status"
              class="text-matrix-text-secondary text-sm font-normal leading-normal pb-2 px-2 text-center"
            >
              Loading role...
            </p>
            <div class="flex items-center gap-2">
              <input
                id="message-input"
                class="flex-1 w-full bg-transparent text-matrix-text-primary placeholder:text-matrix-text-secondary text-base focus:outline-none focus:ring-0 border-none"
                placeholder="Type your message here..."
                type="text"
              />
              <button
                id="send-button"
                type="submit"
                class="flex-shrink-0 bg-matrix-green text-matrix-bg rounded-md p-2 hover:bg-matrix-green-light focus:outline-none focus:ring-2 focus:ring-matrix-green focus:ring-offset-2 focus:ring-offset-matrix-panel"
              >
                <span class="material-symbols-outlined text-xl">send</span>
              </button>
            </div>
          </div>
        </form>
      </main>

      <!-- Sidebar -->
      <aside
        class="w-[280px] flex-shrink-0 bg-matrix-panel flex flex-col border-l border-matrix-border"
      >
        <div class="p-4 border-b border-matrix-border">
          <div class="flex items-center gap-3">
            <div class="flex-1">
              <h1
                class="text-matrix-text-primary text-base font-medium leading-normal"
              >
                Participants
              </h1>
              <p
                id="participant-count"
                class="text-matrix-text-secondary text-sm font-normal leading-normal"
              >
                0 online
              </p>
            </div>
          </div>
        </div>
        <div class="flex-1 overflow-y-auto p-2">
          <div class="flex flex-col gap-1">
            <h2
              class="px-3 pt-4 pb-2 text-xs font-semibold text-matrix-text-secondary uppercase tracking-wider"
            >
              Writers
            </h2>
            <div id="writer-list">
              <!-- Writers will be dynamically inserted here -->
            </div>

            <h2
              class="px-3 pt-4 pb-2 text-xs font-semibold text-matrix-text-secondary uppercase tracking-wider"
            >
              Readers
            </h2>
            <div id="reader-list">
              <!-- Readers will be dynamically inserted here -->
            </div>
          </div>
        </div>
        <!-- Profile Link -->
        <div class="p-4 border-t border-matrix-border mt-auto">
          <a
            href="/profile"
            class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-matrix-grid"
          >
            <span
              class="material-symbols-outlined text-matrix-text-secondary text-xl"
            >
              settings
            </span>
            <p
              class="text-matrix-text-primary text-sm font-medium leading-normal"
            >
              Profile & Settings
            </p>
          </a>
        </div>
      </aside>
    </div>
    <script src="/js/chat.js"></script>
  </body>
</html>
